@page
@using Tasks.EntityModels
@model Tasks.Web.Pages.PersonsModel
@addTagHelper *, Microsoft.AspNetCore.Mvc.TagHelpers

@section extraStyles{
    <link rel="stylesheet" href="./styles/persons.css">
}

<div class="container d-flex mt-100 pt-5 px-0">
    <div class="persons-table border border-1 bg-light">
        <table class="table table-striped table-bordered table-hover">
            <thead class="table-light position-sticky top-0 ">
                <tr>
                    <th class="del-col"></th>
                    <th class="name-col">Nombre</th>
                    <th class="task-col">Tareas no admitidas</th>
                    <th class="add-col"></th>
                </tr>
            </thead>
            <tbody>

                @if(Model.Persons is not null)
                {
                    @foreach(Person p in Model.Persons)
                    {
                        <tr>
                            <td>
                            <td><button
                                    type="button"
                                    data-id="@p.PersonID"
                                    data-name="@p.FullName"
                                    class="btn btn-sm btn-danger"
                                    data-bs-toggle="modal" 
                                    data-bs-target="#modalDeleteConfirmation"> &times;
                                </button></td>
                            </td>
                            <td>@p.FullName</td>
                            <td>@Model.getPersonExceptionTasksNames(p.PersonID)</td>
                            <td class="align-content-center"><button 
                                type="button"
                                data-id="@p.PersonID"
                                data-name="@p.FullName"
                                value="Agregar"
                                class="btn btn-lg btn-sm btn-success"  
                                data-bs-toggle="modal" 
                                data-bs-target="#modalDeleteConfirmation"> Agregar;
                                </button></td>
                        </tr> 
                        
                    }
                }
            </tbody>
        </table>
    </div>
    <div class="form container bg-light border border-1 bg-light">
        <form method="post">
            <div class="form-group mb-2">
                <label for="FirstName">Nombre:</label>
                <input type="text" class="form-control" asp-for="Person!.FirstName" id="FirstName">
            </div>
            <div class="form-group mb-2">
                <label for="LastName">Apellido:</label>
                <input type="text" class="form-control" asp-for="Person!.LastName" id="LastName">
            </div>
            <div class="d-grid gap-2 col-6 mx-auto my-3">
                <input asp-page-handler="Add" type="submit" class="btn btn-lg btn-success" value="Agregar">
            </div>     
        </form>
    </div>

     <!-- Modal eliminar persona  -->
    <div 
        class="modal fade"
        id="modalDeleteConfirmation"
        tabindex="-1"
        aria-labelledby="modalDeleteConfirmation"
        aria-hidden="true">
        <div class="modal-dialog modal-dialog-centered">
            <div class="modal-content">
                <div class="modal-header">
                    <h2 class="modal-title">Confirmación</h2>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body">
                    ¿Desea eliminar este elemento?
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-success" data-bs-dismiss="modal">Cancelar</button>
                    <button type="button" class="btn btn-danger" data-nameI="Angel" onclick="foo(this)">Aceptar</button>
                </div>
            </div>
        </div>
    </div>

    <!-- Modal agregar exception de tarea  -->
    <div 
        class="modal fade"
        id="modalAddTasksExcept"
        tabindex="-1"
        aria-labelledby="modalAddTasksExcept"
        aria-hidden="true">
        <div class="modal-dialog modal-lg modal-dialog-centered">
            <div class="modal-content">
                <div class="modal-header">
                    <h2 class="modal-title">Agregar tarea</h2>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body">
                    <div class="form container bg-light border border-1 bg-light">
                        <form >
                            <div class="form-group mb-2">
                                <label for="Task">Tarea</label>
                                <input type="text" class="form-control" oninput="" id="FirstName">
                                
                            </div>
                            <div class="form-group mb-2">
                                <label for="LastName">Apellido:</label>
                                <input type="text" class="form-control" asp-for="Person!.LastName" id="LastName">
                            </div>
                            <div class="d-grid gap-2 col-6 mx-auto my-3">
                                <button asp-page-handler="Add" type="submit" class="btn btn-lg btn-success" value="Agregar"></button>
                            </div>     <!---Handler-->
                        </form>
                    </div>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-success" data-bs-dismiss="modal">Cancelar</button>
                    <button type="button" class="btn btn-danger" data-nameI="Angel" onclick="foo(this)">Aceptar</button>
                </div>
            </div>
        </div>

        @section Scripts{

            <script>
                

            </script>
        }
    </div>
    
</div>