@page
@using Tasks.EntityModels

@model Tasks.Web.Pages.ActivitiesModel
@addTagHelper *, Microsoft.AspNetCore.Mvc.TagHelpers
@section navStyle {
  <style>
    td {
      height: 20px;
    }

    table {
      height: 100%;
    }

    .row {
      float: left;
      width: 700px;
      height: 500px;
      max-height: 400px;
      overflow: auto;


      max-width: 800px;
      margin: 0 auto;
      margin-top: 200px;
      margin-left: 5%;
      border: 3px solid black;
      /*margin-right: 0px;*/

    }

    .fecha {
      float: right;
      width: 100%;
      max-width: 144px;
      border: 3px solid black;
      margin-top: 200px;
      margin-left: 0%;


    }

    .container1 {

      max-width: 1000px;
      margin: 0 auto;
      margin-left: 10%;
    }

    .añadir {
      float: left;
      margin-left: 20%;
      margin-top: 50px;
      width: 100%;



    }

    a {
      color: black;
      text-decoration: none;
    }

    .navActivity {
      background-color: rgb(78, 159, 159);
    }
  </style>
}
<div class="modal fade" id="exampleModal" tabindex="-1" aria-labelledby="exampleModalLabel" aria-hidden="true">
  <div class="modal-dialog">
    <div class="modal-content">
      <div class="modal-header">
        <h1 class="modal-title fs-5" id="exampleModalLabel">Modal title</h1>
        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
      </div>
      <div class="modal-body">

       
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
        <button type="button" class="btn btn-primary">Save changes</button>
      </div>
    </div>
  </div>
</div>


<div class="container1">

  <div class="row">

    <table class="table">
      <thead class="thead-inverse" style="position: sticky; top: 0">
        <tr>

          <th colspan="4" style="border: none;">
            <h1>Actividades</h1>
          </th>
        </tr>
        <tr>
          <th>Eliminar</th>
          <th>Fecha</th>
          <th>Actividad</th>
          <th>detalles</th>
        </tr>
      </thead>

      <tbody>

        <div class="activities">

          @if (Model.Activities is not null)
          {
            @foreach (Activity a in Model.Activities)
            {
              string date = a.Date.ToString("dd/MM/yyyy");
              <tr>
                <td>

                  <button type="submit" class="btn btn-primary" data-bs-toggle="modal" data-bs-target="#exampleModal">
                    Eliminar
                  </button>


                  @*<form method="post" asp-page-handler="Delete" asp-route-id="@a.ActivityID">
                  </form>*@
                </td>
                <td>@date</td>
                <td>@a.ActivityName</td>
                <td><input type="submit" value="ver detalles"></td>
              </tr>
            }
          }
        </div>
      </tbody>
    </table>

  </div>
  <div class="fecha">
    @{
      string fecha;
      if (Model.fecha == DateTime.MaxValue) { fecha = "dd/mm/aaaa"; }
      else
      {
        fecha =
        Model.fecha.ToString("yyyy-MM-dd");
      }
    }
    <form method="POST" asp-page-handler="FilterDate">
      <input type="date" id="fecha" name="fecha" onchange="this.form.submit()" value="@fecha" required>
    </form>

  </div>

</div>
<div class="añadir">
  <form method="post" asp-page-handler="Add">
    <input type="text" asp-for="Activity!.ActivityName"><input type="date" asp-for="Activity!.Date"
      value="dd/mm/aaaa"><input type="submit" value="Añadir">
  </form>
</div>
<script>
  const myModal = document.getElementById('myModal')
  const myInput = document.getElementById('myInput')

  myModal.addEventListener('shown.bs.modal', () => {
    myInput.focus()
  })
</script>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha3/dist/js/bootstrap.bundle.min.js"></script>
